### Do not know how to serialize a Bigint
* 在express中response.json时，遇到Bigint无法序列化的问题。
* 解决方法：在调用`response.json()`时，使用`BigInt`的toString()方法将其转换为字符串。
```javascript
// src/helper.ts
export function objReplacer(key: string, value: any): any {
    const seen = new WeakSet<object>();

    if (typeof value === 'bigint') {
        return value.toString();
    } else if (typeof value === 'object' && value !== null) {
        // 如果已经遍历过，跳过，避免循环引用
        if (seen.has(value)) {
            return undefined;
        }
        seen.add(value);

        // 只遍历自己的字段，跳过原型链
        for (const k of Object.keys(value)) {
            const v = (value as any)[k];
            if (typeof v === 'bigint') {
                (value as any)[k] = v.toString();
            } else if (typeof v === 'object' && v !== null) {
                // 递归调用 replacer 本身
                (value as any)[k] = objReplacer(k, v);
            }
        }
    }
    return value;
}
// src/api/app.ts
import express from 'express';
import { objReplacer } from '../helper';
app.set('json replacer', objReplacer);
```

### Typeorm Blob Converting circular structure to JSON
 * 在schema中定义了Blob类型的字段，使用Typeorm时，查询结果会返回一个Buffer对象。
 * 解决方法：在typeorm的实体类中，在Blob字段的定义中定义转换函数，将Buffer对象转换为字符串。

```javascript
// src/entity/BlobEntity.ts
import { transformer } from '../typeorm/transformer';
@EntityDecorator('entity')
export class BlobEntity {
    @Column({ nullable: false })
    _key!: string;

    @Column({
        type: 'simple-array',
        default: '',
        transformer: transformer(TypeOrm.BLOB_TO_OBJECT_TYPE.ARRAY)
    })
    ownerAppKeys!: string[];
}
// src/typeorm/transformer.ts
export enum BLOB_TO_OBJECT_TYPE {
    'OBJECT' = 'Object',
    'ARRAY' = 'Array'
}

export function transformer<T extends Array<any> | object>(
    toType: BLOB_TO_OBJECT_TYPE = BLOB_TO_OBJECT_TYPE.OBJECT
) {
    return {
        to: (val: T) => {
            if (Array.isArray(val)) {
                return val.join(',');
            }
            return JSON.stringify(val);
        },
        from: async (val: Lob) => {
            return await BlobToObject(val, toType);
        }
    };
}
```